<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TrustFrameworkPolicy xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns="http://schemas.microsoft.com/online/cpim/schemas/2013/06" 
    PolicySchemaVersion="0.3.0.0" 
    TenantId="{Settings:Tenant}" 
    PolicyId="B2C_1A_SPID_CNT" 
    PublicPolicyUri="http://{Settings:Tenant}/B2C_1A_SPID_CNT">

    <BasePolicy>
        <TenantId>{Settings:Tenant}</TenantId>
        <PolicyId>B2C_1A_TrustFrameworkExtensions</PolicyId>
    </BasePolicy>

    <BuildingBlocks>
        <ContentDefinitions>

            <!-- This content definition is to render an error page that displays unhandled errors. -->
            <ContentDefinition Id="api.error">
                <LoadUri>~/tenant/templates/AzureBlue/exception.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:globalexception:1.1.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Error page</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.idpselections">
                <LoadUri>{Settings:CustomUiBlobStorageUrl}/customui-spid.html</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:providerselection:1.0.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Idp selection page</Item>
                    <Item Key="language.intro">Sign in</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.idpselections.signup">
                <LoadUri>~/tenant/templates/AzureBlue/idpSelector.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:providerselection:1.0.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Idp selection page</Item>
                    <Item Key="language.intro">Sign up</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.signuporsignin">
                <LoadUri>{Settings:CustomUiBlobStorageUrl}/customui-spid.html</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:unifiedssp:1.0.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Signin and Signup</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.selfasserted">
                <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.1.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Collect information from user page</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.selfasserted.profileupdate">
                <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.1.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Collect information from user page</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.localaccountsignup">
                <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.1.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Local account sign up page</Item>
                </Metadata>
            </ContentDefinition>

            <ContentDefinition Id="api.localaccountpasswordreset">
                <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
                <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
                <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.1.0</DataUri>
                <Metadata>
                    <Item Key="DisplayName">Local account change password page</Item>
                </Metadata>
            </ContentDefinition>

        </ContentDefinitions>
    </BuildingBlocks>

</TrustFrameworkPolicy>
